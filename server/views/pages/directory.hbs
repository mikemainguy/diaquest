<form id="createWorld" method="POST" action="/worlds/create">
    <div>
        <label for="name">Name</label><input name="name">
    </div>
    <div>
        <label for="">public?</label><input name="public" type="checkbox">
    </div>
    <div>
        <input type="submit">
    </div>



</form>
<form id="addCollaborator" method="POST" action="/worlds/invite">
    <div>
        <label for="email">Email</label><input name="email">
    </div>
    <div>
        <label for="world">World</label><input name="world">
    </div>
    <div>
        <input type="submit">
    </div>



</form>
<script>
    document.getElementById('createWorld').addEventListener('submit',
            function(event) {
                event.preventDefault();
                fetch(event.target.action,
                        {
                            headers: {
                                "Content-Type": "application/x-www-form-urlencoded"
                            },
                            method:'post',
                            body: new URLSearchParams(new FormData(event.target))
                        }
                ).then((res)=> {
                    if (res.status == 'OK') {
                        console.log('success');
                    } else {
                        console.log('Error');
                    }
                });
            }, false);


    document.getElementById('addCollaborator').addEventListener('submit',
            function(event) {
                const form = FormData(event.target)
                event.preventDefault();
                fetch(event.target.action,
                        {
                            headers: {
                                "Content-Type": "application/json"
                            },
                            method:'post',
                            body: {email: form.get('email'), world: form.get('world')}
                        }
                ).then((res)=> {
                    if (res.status == 'OK') {
                        console.log('success');
                    } else {
                        console.log('Error');
                    }
                });
            }, false);

</script>

<ul id="listing">

</ul>

