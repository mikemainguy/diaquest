<div id="roomparent">
    <div id="room"></div>
</div>
<div class="nonvr">
    <button id="joinButton"></button>
    <button id="leaveButton"></button>
    <button id="muteButton"></button>
    <button id="unmuteButton"></button>
    <button id="homeButton"></button>

    <form id="media" action="/api/media/create">
        <label for="fileupload">Upload Media</label>
        <input id="fileupload" type="file" name="fileupload"/>
        <button id="uploadButton" type="submit"></button>
    </form>

</div>

<script>
    document.getElementById('media').addEventListener('submit', function (event) {
        event.preventDefault();
        let formData = new FormData();
        formData.append("file", event.target.fileupload.files[0]);
        formData.append("path", window.location.pathname);
        fetch(event.target.action, {
            method: "POST",
            body: formData
        }).then((res) => {
            if (res.status == 200) {
                window.alert('File added');
            }
        });

    }, false);

    document.getElementById('homeButton').addEventListener('click', () => {
        window.location.href = (window.location.origin);
    });
    document.getElementById('joinButton').addEventListener('click', (evt) => {
        document.dispatchEvent(
                new CustomEvent('connectSignalwire',
                        {detail: 'OK'}));
        document.getElementById('leaveButton').style.display = 'inline-block';
        document.getElementById('joinButton').style.display = 'none';
        document.getElementById('muteButton').style.display = 'inline-block';

    });
    document.getElementById('leaveButton').addEventListener('click', (evt) => {
        document.dispatchEvent(
                new CustomEvent('disconnectSignalwire',
                        {detail: 'OK'}));
        document.getElementById('leaveButton').style.display = 'none';
        document.getElementById('joinButton').style.display = 'inline-block';
        document.getElementById('muteButton').style.display = 'none';
        document.getElementById('unmuteButton').style.display = 'none';

    });
    document.getElementById('muteButton').addEventListener('click', (evt) => {
        document.dispatchEvent(
                new CustomEvent('mute',
                        {detail: 'OK'}));
        document.getElementById('muteButton').style.display = 'none';
        document.getElementById('unmuteButton').style.display = 'inline-block';

    });
    document.getElementById('unmuteButton').addEventListener('click', (evt) => {
        document.dispatchEvent(
                new CustomEvent('unmute',
                        {detail: 'OK'}));
        document.getElementById('muteButton').style.display = 'inline-block';
        document.getElementById('unmuteButton').style.display = 'none';
    });
</script>
